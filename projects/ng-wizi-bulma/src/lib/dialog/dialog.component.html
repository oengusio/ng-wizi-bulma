<div class="modal is-active">
  <div class="modal-background" (click)="backdropHandler()"></div>
  <div class="modal-card"
    [@modalState]="open? 'active' : 'inactive'"
    (@modalState.done)="animationDone($event)"
    [ngStyle]="{'width': config.width}"
    >
    @if (config.title) {
      <header class="modal-card-head" #header>
        <p class="modal-card-title">{{config.title}}</p>
        @if (config.hasBackdrop) {
          <button class="delete" (click)="backdropHandler()" #backdropButton></button>
        }
      </header>
    }

    @if (config.loading) {
      <section class="modal-card-body">
        <nwb-spinner></nwb-spinner>
      </section>
    }

    @if (!config.loading && config.message && config.message.length > 0) {
      <section class="modal-card-body"
        [innerHTML]="config.message">
      </section>
    }

    <section class="modal-card-body" [ngClass]="{'is-hidden':!hasComponent || config.loading}">
      <div #componentSection></div>
    </section>

    @if (!config.loading && (config.cancelButtonText.length > 0 || config.okButtonText.length > 0)) {
      <footer class="modal-card-foot"
        #footer>
        @if (config.cancelButtonText) {
          <button class="button column is-medium is-danger is-4"
            (click)="cancelHandler()" #cancelButton>{{config.cancelButtonText}}
          </button>
        }
        @if (config.okButtonText) {
          <button class="button column is-medium is-success is-offset-4"
            (click)="okHandler()" #okButton>{{config.okButtonText}}
          </button>
        }
      </footer>
    }
  </div>
</div>
